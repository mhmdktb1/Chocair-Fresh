### ==========================================
### CHOCAIR FRESH API - TESTING ENDPOINTS
### ==========================================
### Use REST Client extension in VS Code to test these endpoints
### Or copy to Postman/Thunder Client

### Variables
@baseUrl = http://localhost:5000
@token = YOUR_JWT_TOKEN_HERE

### ==========================================
### HEALTH & TEST ENDPOINTS
### ==========================================

### Test API Connection
GET {{baseUrl}}/api/test

### Health Check
GET {{baseUrl}}/api/health

### API Documentation
GET {{baseUrl}}/

### ==========================================
### USER AUTHENTICATION
### ==========================================

### Register New User
POST {{baseUrl}}/api/users/register
Content-Type: application/json

{
  "name": "Test User",
  "email": "test@chocair.com",
  "password": "password123",
  "phone": "+961 70 123 456"
}

### Register Admin User
POST {{baseUrl}}/api/users/register
Content-Type: application/json

{
  "name": "Admin User",
  "email": "admin@chocair.com",
  "password": "admin123",
  "phone": "+961 70 999 888",
  "role": "admin"
}

### Login User
POST {{baseUrl}}/api/users/login
Content-Type: application/json

{
  "email": "test@chocair.com",
  "password": "password123"
}

### Login Admin
POST {{baseUrl}}/api/users/login
Content-Type: application/json

{
  "email": "admin@chocair.com",
  "password": "admin123"
}

### ==========================================
### USER PROFILE (Protected Routes)
### ==========================================

### Get User Profile
GET {{baseUrl}}/api/users/profile
Authorization: Bearer {{token}}

### Update User Profile
PUT {{baseUrl}}/api/users/profile
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Updated Name",
  "phone": "+961 70 555 666",
  "address": {
    "street": "123 Main St",
    "city": "Beirut",
    "state": "Beirut",
    "zipCode": "1234",
    "country": "Lebanon"
  }
}

### Add to Favorites
POST {{baseUrl}}/api/users/favorites/PRODUCT_ID_HERE
Authorization: Bearer {{token}}

### Remove from Favorites
DELETE {{baseUrl}}/api/users/favorites/PRODUCT_ID_HERE
Authorization: Bearer {{token}}

### ==========================================
### ADMIN - USER MANAGEMENT
### ==========================================

### Get All Users (Admin Only)
GET {{baseUrl}}/api/users
Authorization: Bearer {{token}}

### Delete User (Admin Only)
DELETE {{baseUrl}}/api/users/USER_ID_HERE
Authorization: Bearer {{token}}

### ==========================================
### PRODUCTS (Public Routes)
### ==========================================

### Get All Products
GET {{baseUrl}}/api/products

### Get All Products with Filters
GET {{baseUrl}}/api/products?category=Fresh%20Vegetables&minPrice=1&maxPrice=10&sort=-price&page=1&limit=12

### Search Products
GET {{baseUrl}}/api/products?search=tomato

### Get Featured Products
GET {{baseUrl}}/api/products/featured

### Get Products by Category
GET {{baseUrl}}/api/products/category/Fresh%20Vegetables

### Get Single Product
GET {{baseUrl}}/api/products/PRODUCT_ID_HERE

### ==========================================
### ADMIN - PRODUCT MANAGEMENT
### ==========================================

### Create New Product (Admin Only)
POST {{baseUrl}}/api/products
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Fresh Tomatoes",
  "description": "Organic red tomatoes, fresh from local farms",
  "price": 3.99,
  "priceUnit": "kg",
  "unit": "kg",
  "category": "Fresh Vegetables",
  "categories": ["Fresh Vegetables", "Organic"],
  "image": "https://example.com/tomato.jpg",
  "stock": 100,
  "featured": true
}

### Update Product (Admin Only)
PUT {{baseUrl}}/api/products/PRODUCT_ID_HERE
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Fresh Organic Tomatoes",
  "price": 4.49,
  "stock": 150
}

### Update Product Stock (Admin Only)
PATCH {{baseUrl}}/api/products/PRODUCT_ID_HERE/stock
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": 50,
  "operation": "add"
}

### Delete Product (Admin Only)
DELETE {{baseUrl}}/api/products/PRODUCT_ID_HERE
Authorization: Bearer {{token}}

### ==========================================
### ORDERS (Customer Routes)
### ==========================================

### Create New Order
POST {{baseUrl}}/api/orders
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "items": [
    {
      "product": "PRODUCT_ID_HERE",
      "name": "Fresh Tomatoes",
      "quantity": 2,
      "unit": "kg",
      "price": 3.99,
      "image": "https://example.com/tomato.jpg",
      "total": 7.98
    }
  ],
  "itemCount": 1,
  "shippingAddress": {
    "fullName": "John Doe",
    "phone": "+961 70 123 456",
    "street": "123 Main St",
    "city": "Beirut",
    "state": "Beirut",
    "zipCode": "1234",
    "country": "Lebanon"
  },
  "paymentMethod": "cash",
  "subtotal": 7.98,
  "taxAmount": 0.80,
  "shippingCost": 2.00,
  "discount": 0,
  "total": 10.78
}

### Get My Orders
GET {{baseUrl}}/api/orders/myorders
Authorization: Bearer {{token}}

### Get Single Order
GET {{baseUrl}}/api/orders/ORDER_ID_HERE
Authorization: Bearer {{token}}

### ==========================================
### ADMIN - ORDER MANAGEMENT
### ==========================================

### Get All Orders (Admin Only)
GET {{baseUrl}}/api/orders/admin/all
Authorization: Bearer {{token}}

### Get All Orders with Filters (Admin Only)
GET {{baseUrl}}/api/orders/admin/all?status=Pending&startDate=2024-01-01&endDate=2024-12-31&page=1&limit=20
Authorization: Bearer {{token}}

### Get Order Statistics (Admin Only)
GET {{baseUrl}}/api/orders/admin/stats
Authorization: Bearer {{token}}

### Update Order Status (Admin Only)
PUT {{baseUrl}}/api/orders/ORDER_ID_HERE/status
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "Preparing"
}

### Mark Order as Paid (Admin Only)
PUT {{baseUrl}}/api/orders/ORDER_ID_HERE/pay
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "id": "PAYMENT_ID",
  "status": "COMPLETED",
  "updateTime": "2024-11-06T10:30:00Z",
  "emailAddress": "customer@example.com"
}

### Delete Order (Admin Only)
DELETE {{baseUrl}}/api/orders/ORDER_ID_HERE
Authorization: Bearer {{token}}

### ==========================================
### NOTES
### ==========================================
# 1. Replace {{token}} with actual JWT token from login response
# 2. Replace PRODUCT_ID_HERE with actual product MongoDB _id
# 3. Replace ORDER_ID_HERE with actual order MongoDB _id
# 4. Replace USER_ID_HERE with actual user MongoDB _id
# 5. Admin routes require admin role in JWT token
# 6. All protected routes require Authorization header with Bearer token
